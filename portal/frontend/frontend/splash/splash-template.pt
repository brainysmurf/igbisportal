<html metal:use-macro="load: frontend:templates/portal_main.pt">

<div metal:fill-slot="additional-css" tal:omit-tag="">
  <link rel="stylesheet" type="text/css" href="${static_url}bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="${static_url}bootstrap-switch/css/bootstrap3/bootstrap-switch.min.css" />
  <link rel="stylesheet" type="text/css" href="${static_url}gridly/stylesheets/jquery.gridly.css" />
  <link rel="stylesheet" type="text/css" href="${static_url}fontawesome-iconpicker/css/fontawesome-iconpicker.min.css" />

  <link rel="stylesheet" type="text/css" href="${static_url}colorselector/css/bootstrap-colorselector.css" />
  <link rel="stylesheet" type="text/css" href="${static_url}css/splash.css" />

  <script type="text/javascript" src="${static_url}bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="${static_url}bootstrap-switch/js/bootstrap-switch.min.js"></script>
  <script type="text/javascript" src="${static_url}js/splash/jBox.min.js"></script>
  <script type="text/javascript" src="${static_url}colorselector/js/bootstrap-colorselector.js"></script>

  <script type="text/javascript" src="${static_url}fontawesome-iconpicker/js/fontawesome-iconpicker.min.js"></script>
  <script type="text/javascript" src="${static_url}js/URI.min.js"></script>
  <script type="text/javascript" src="${static_url}gridly/javascripts/jquery.gridly.js"></script>
  <script type="text/javascript" src="${static_url}sortable.min.js"></script>

  <script type="text/javascript" src="${static_url}js/splash/splash-header-buttons.js"></script>

  <script type="text/javascript" src="${static_url}js/splash/splash-loaded.js" defer></script>
  <script type="text/javascript" src="${static_url}js/splash/splash-userbuttons.js" defer></script>
</div>

<div metal:fill-slot="additional-buttons" tal:omit-tag="">
  <!-- <input data-size="large" id="edit_button" type="checkbox" value="1" /> -->
  <button id="settingsButton" class="nav_button"><i class="fa fa-cog"></i>&nbsp;&nbsp;Settings</button>  
  <button id="editButton" class="nav_button"><i class="fa fa-pencil"></i>&nbsp;&nbsp;Modify</button>  
  <button id="newButtonButton" class="nav_button"><i class="fa fa-plus"></i>&nbsp;&nbsp;New Button</button>  
  <button id="newTabButton" class="nav_button"><i class="fa fa-plus-square"></i>&nbsp;&nbsp;New Tab</button>  
</div>

<div metal:fill-slot="dialogs">
      <div id="unique" style="display:none;" data-unique="${unique or ''}"></div>

      <div id="newTabHolder">
        <div>
          <div class="grid"></div>
        </div>
      </div>

      <div id="newButtonHolder">
        <div style="display:none;" class="splashButton small">
          <a class="newButton" href="#">
            <div>
                <div class="buttonIcon"><i class="fa fa-plus-circle"></i></div>
            </div>
            <div class="splashButtonTitle">New Button</div>
          </a>
        </div>
      </div>

      <div id="newTabDialog" style="display:none;"> 
        <label class="high-margin" for="ntd_from">Enter the name of the tab:</label><br />
        <input id="ntd_from" class="full-width" type="text" /><br /><br />
      </div>

      <div id="newButtonDialog" style="display:none;"> 
        <!-- <label class="high-margin" for="nbd_preview">Preview:</label> -->
        <div id="nbd_preview"></div>
        <label class="high-margin" for="nbd_name">Enter the name of the button:</label>
        <input id="nbd_name" class="full-width" type="text" />
        <label class="high-margin" for="nbd_link">Enter the link:</label>&nbsp;<span class="js-validate-msg warning-text"></span>
        <input id="nbd_link" class="full-width" type="text" />

        <label class="high-margin" for="nbd_color">Choose the color:</label>
        <select id="nbd_color">
            <option value="default" data-color="#eeeeeee" selected="selected">default</option>
            <option value="lightYellow" data-color="#FFD600">lightYellow</option>
            <option value="yellow" data-color="#D8DC6A">yellow</option>
            <option value="orange" data-color="#F39C12">orange</option>
            <option value="peach" data-color="#eeaaaa">peach</option>
            <option value="beige" data-color="#C1BCAC">beige</option>
            <option value="green" data-color="#2ECC71">green</option>
            <option value="brightGreen" data-color="#D1DEDE">brightGreen</option>
            <option value="blue" data-color="#A9CEF4">blue</option>
            <option value="purple" data-color="#ADA7C9">purple</option>
        </select>
        
        <label class="high-margin" for="nbd_icon">Choose the icon:</label>
        <div class="input-group iconpicker-container">
            <span class="input-group-addon"><i class="fa fa-external-link-square"></i></span>
            <input id="nbd_icon" data-placement="bottomLeft" class="form-control icp icp-auto iconpicker-element iconpicker-input" value="fa-external-link-square" type="text">
        </div>

      </div>

      <div id="shareable_link_bp" style="display:none;">
        <p>NOTE: Convert "plain" links to links that have our IGBIS username/password embedded.</p><br /><br />

        <label for="bp_from">Enter the URL:</label><br />
        <input id="bp_from" class="full-width" type="text" /><br /><br />
        <label for="bp_to">Click the box to "copy":</label><br />
        <input id="bp_to" class="full-width" type="text" />
      </div>

      <div id="settings_dialog" style="display:none;">      
       <form id="icon_size_form">
        <br /><strong>Button Size:</strong><br />
        <input type="radio" name="icon_size" id="larger_icons" value="+1" ${'checked' if (settings and settings.icon_size == '+1') or not settings else ""} />
        <label for="larger_icons">Larger Icons</label><br />

        <input type="radio" name="icon_size" id="smaller_icons" value="-1" ${'checked' if settings and settings.icon_size == '-1' else ""} />
        <label for="smaller_icons">Smaller Icons</label>
       </form>
       <form id="new_tab_form">
        <br /><strong>On Click:</strong><br />
        <input id="new_tab_checkbox" type="checkbox" name="new_tab" ${'value="1" checked="checked"' if settings and settings.new_tab else 'value="0"'}  />
        <label for="new_tab_checkbox">Open in a new tab</label>
       </form>
    </div>
</div>


<div metal:fill-slot="content">

  <!-- Stick value of unique into a non-display item -->

  <div id="tabs_holder">
    <ul id="tabs_titlebar">
      <li tal:repeat="key buttons"><a class="draggableTab" href="#${key}">${key.replace('_', ' ')}</a></li>
    </ul> 

   <tal:block tal:define="global counter 1" tal:repeat="key buttons">
    <div id="${key}">
      <div class="grid">
        <tal:block tal:define="items buttons[key]" tal:repeat="button items">

          <div class="splashButtonContainer">
          <div class="onButton sizeOnButton"><i class="fa fa-expand"></i></div>
          <div class="onButton editOnButton"><i class="fa fa-pencil"></i></div>

          <div class="splashButton small buttons_for_jbox" data-counter="${counter}" data-url="${button.url}" data-icon="${button.icon}" data-name="${button.name}">
            <a href="${button.url}">
              <div tal:define="global counter counter+1"  id="${button.id}">
                    <div class="buttonIcon"><i class="fa fa-${button.icon}"></i></div>
              </div>
              <div class="splashButtonTitle">${button.name}</div>
            </a>
          </div>
          </div>

        </tal:block>
      </div>
    </div> 
   </tal:block>
  </div><!-- /.tabs_holder -->


  <!-- 
  <script type="text/javascript">    
      new jBox('Notice', {
          content: 'New: Google login, and more features!',
          color: 'blue'
      });
  </script>
  -->


  <tal:block tal:define="global another_counter 0" tal:repeat="key buttons" tal:condition="buttons">
    <tal:block tal:repeat="button buttons[key]">
    <tal:block tal:define="global another_counter another_counter+1">
    <tal:block tal:condition="button.context_menu">

      <ul style="display:none" class="submenus_for_jbox" data-counter="${another_counter}" tal:condition="button.context_menu">
        <li tal:repeat="menu_item button.context_menu.get('items')">
          <tal:block tal:condition="menu_item.url">
            <a href="${menu_item.url}">&nbsp;${menu_item.display}</a>
          </tal:block>
          <tal:block tal:condition="menu_item.url is False">
            <div id="${menu_item.name}"><hr /></div>
          </tal:block>
          <tal:block tal:condition="menu_item.url is None">
            <hr />
          </tal:block>
        </li>
      </ul>

    </tal:block>
    </tal:block>
    </tal:block>
  </tal:block>

    </div>

</html>

