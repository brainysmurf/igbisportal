<!DOCTYPE html>
<html tal:define="role request.GET.get('role', 'student')" tal:define="static_url request.static_url('frontend:static/')">
<head>
  <title>${title}</title>

  <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="${static_url}font-awesome/css/font-awesome.min.css"> 
  <link rel="stylesheet" type="text/css" href="${static_url}jbox/jBox.css" />

  <link rel="stylesheet" type="text/css" href="${static_url}jquery-ui/jquery-ui.min.css" />
  <link rel="stylesheet" type="text/css" href="${static_url}css/splash.css" />

  <script type="text/javascript" src="${static_url}jquery.min.js" defer></script>
  <script type="text/javascript" src="${static_url}jquery-ui/jquery-ui.min.js" defer></script>
  <script type="text/javascript" src="${static_url}js/packery.pkgd.min.js" defer></script>
  <script type="text/javascript" src="${static_url}jbox/jBox.min.js" defer></script>

  <script type="text/javascript" src="${static_url}js/initial.js" defer></script> 
  <script tal:condition="not unique" type="text/javascript" src="${static_url}js/initialNotUnique.js" defer></script> 
  <script type="text/javascript" src="${static_url}js/tabsHolder.js" defer></script>

  <!-- Launch Google Signin procedures, use defer  -->
  <script type="text/javascript" src="${static_url}js/callback.js" defer></script>
  <script src="https://apis.google.com/js/client:platform.js?onload=start" defer></script>

  <script>var unique='${unique}'</script>

</head>
<body>


<div id="wrapper">

      <div id="button_list" style="display:none;">
          <button id="settingsButton" class="click_button"><i class="fa fa-cog"></i>&nbsp;&nbsp;Settings</button>
          <button id="userButton" class="click_button" ><i class="fa fa-user"></i>&nbsp;&nbsp;${name or "Logged in!"}</button>
      </div>
      <div class="clearfix"></div>

    <div tal:condition="unique" id="signinButton" style="height:36px;">
      <!-- 
        data-approvalprompt="force" 
        https://developers.google.com/+/web/signin/reference 
      -->
      <div id="button_list" style="float:right;">
        <div id="userButton" style="height:200px;" class="g-signin"
        data-scope="openid email profile https://www.googleapis.com/auth/plus.login"
        data-clientid="${client_id}"
        data-redirecturi="postmessage"
        data-accesstype="offline"
        data-origin="${data_origin}"
        data-cookiepolicy="single_host_origin"
        data-callback="signInCallback"
        data-height="standard"

        >
      </div></div>
      <div class="clearfix"></div>
    </div>

    <div id="settings_dialog" style="display:none;">      
       <form id="icon_size_form">
        <br /><strong>Button Size:</strong><br />
        <input type="radio" name="icon_size" id="larger_icons" value="+1" ${'checked' if (settings and settings.icon_size == '+1') or not settings else ""} />
        <label for="larger_icons">Larger Icons, with title</label><br />

        <input type="radio" name="icon_size" id="smaller_icons" value="-1" ${'checked' if settings and settings.icon_size == '-1' else ""} />
        <label for="smaller_icons">Smaller Icons, without title</label>
       </form>
       <form id="new_tab_form">
        <br /><strong>On Click:</strong><br />
        <input id="new_tab_checkbox" type="checkbox" name="new_tab" ${'value="1" checked="checked"' if settings and settings.new_tab else 'value="0"'}  />
        <label for="new_tab_checkbox">Open in a new tab</label>
       </form>
    </div>

    <div id="shareable_link" style="display:none;">      
      <form id="shareable_link_form">
        <input type="text" name="brainpop" id="from_url" value="" />
        <label for="from_url">Enter the BrainPop URL:</label><br />

        <input type="text" name="brainpop" id="to_url" value="" />
        <label for="smaller_icons">This is the link that will automatially log in users:</label>
      </form>
    </div>

      <div id="tab_container">
        <ul>
        <li tal:repeat="key buttons" tal:attributes="class 'tab_selected' if role=='${key}' else ''">
          <a href="#${key}">${key}</a>
        </li>
       </ul>

     <tal:block tal:define="global counter 0" tal:repeat="key buttons" tal:condition="buttons">
        <tal:block tal:define="items buttons[key]">
          <div class="js-packery splash_button_tab" data-packery-options='{ "isInitLayout":true,"transitionDuration": "0.1s", "itemSelector":".splash_button_item", "gutter": 10, "columnWidth":110, "rowHeight":150}' id="${key}">
            <tal:block tal:repeat="button items" >
            <div class="splash_button_item">
              <div class="splash_button_wrapper">
                <div tal:define="global counter counter+1"  id="jbox_button_${counter}" class="splash_button ${'smaller' if settings and settings.icon_size == '-1' else ''}">
                  <a href="${button.url}"><i class="fa fa-${button.icon} fa-5x"></i></a>
                </div>
                <div class="splash_button_text">${button.name}</div>
              </div>
            </div>
            </tal:block>
          </div> 
        </tal:block>
     </tal:block>
     </div>
</div>

<tal:block tal:repeat="key buttons" tal:condition="buttons">
  <tal:block tal:define="global another_counter 0" tal:repeat="button buttons[key]">
  <tal:block tal:define="global another_counter another_counter+1">
  <tal:block tal:condition="button.context_menu">

    <ul style="display:none" id="submenus_for_${another_counter}">
      <li tal:repeat="menu_item button.context_menu.get('items')">
        <tal:block tal:condition="menu_item.url">
          <a href="${menu_item.url}"><i class="fa fa-${menu_item.icon} fa-fw"></i>&nbsp;${menu_item.display}</a>
        </tal:block>
        <tal:block tal:condition="menu_item.url is False">
          <div id="${menu_item.name}"><hr /></div>
        </tal:block>
        <tal:block tal:condition="menu_item.url is None">
          <hr />
        </tal:block>
      </li>
    </ul>

  </tal:block>
  </tal:block>
  </tal:block>
</tal:block>


</body>
</html>
